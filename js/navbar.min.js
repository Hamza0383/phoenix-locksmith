(function(){'use strict';const menuToggle=document.querySelector('.menu-toggle');const navMenu=document.querySelector('.nav-menu');const navDropdowns=document.querySelectorAll('.nav-dropdown');const body=document.body;const DESKTOP_BREAKPOINT=1024;let isDesktop=window.innerWidth>=DESKTOP_BREAKPOINT;let resizeTimeout=null;function updateDesktopState(){isDesktop=window.innerWidth>=DESKTOP_BREAKPOINT}function toggleMobileMenu(){const isOpen=menuToggle.getAttribute('aria-expanded')==='true';menuToggle.setAttribute('aria-expanded',!isOpen);navMenu.classList.toggle('is-active');body.classList.toggle('menu-open');if(isOpen){closeAllDropdowns()}}function closeMobileMenu(){menuToggle.setAttribute('aria-expanded','false');navMenu.classList.remove('is-active');body.classList.remove('menu-open');closeAllDropdowns()}function closeAllDropdowns(){navDropdowns.forEach(dropdown=>{dropdown.classList.remove('is-open');const dropdownToggle=dropdown.querySelector('a[aria-haspopup]');if(dropdownToggle){dropdownToggle.setAttribute('aria-expanded','false')}})}function toggleDropdown(dropdown,event){const dropdownToggle=dropdown.querySelector('a[aria-haspopup]');if(!isDesktop){event.preventDefault();const isOpen=dropdown.classList.contains('is-open');navDropdowns.forEach(d=>{if(d!==dropdown){d.classList.remove('is-open');const toggle=d.querySelector('a[aria-haspopup]');if(toggle){toggle.setAttribute('aria-expanded','false')}}});dropdown.classList.toggle('is-open');dropdownToggle.setAttribute('aria-expanded',!isOpen)}}function handleClickOutside(event){const isMenuOpen=navMenu.classList.contains('is-active');const clickedInsideMenu=navMenu.contains(event.target);const clickedOnToggle=menuToggle.contains(event.target);if(isMenuOpen&&!clickedInsideMenu&&!clickedOnToggle){closeMobileMenu()}}function handleResize(){if(resizeTimeout){cancelAnimationFrame(resizeTimeout)}resizeTimeout=requestAnimationFrame(()=>{updateDesktopState();if(isDesktop){closeMobileMenu()}})}function handleEscapeKey(event){if(event.key==='Escape'){closeMobileMenu()}}function handleDropdownKeyboard(event){const dropdown=event.target.closest('.nav-dropdown');if(!dropdown)return;if(event.key==='Enter'||event.key===' '){if(!isDesktop){toggleDropdown(dropdown,event)}}if(event.key==='Escape'){dropdown.classList.remove('is-open');const toggle=dropdown.querySelector('a[aria-haspopup]');if(toggle){toggle.setAttribute('aria-expanded','false');toggle.focus()}}}function init(){if(menuToggle){menuToggle.addEventListener('click',toggleMobileMenu)}navDropdowns.forEach(dropdown=>{const dropdownToggle=dropdown.querySelector('a[aria-haspopup]');if(dropdownToggle){dropdownToggle.addEventListener('click',(event)=>{toggleDropdown(dropdown,event)});dropdownToggle.addEventListener('keydown',handleDropdownKeyboard)}dropdown.addEventListener('mouseenter',()=>{if(isDesktop){dropdown.classList.add('is-open');const toggle=dropdown.querySelector('a[aria-haspopup]');if(toggle){toggle.setAttribute('aria-expanded','true')}}});dropdown.addEventListener('mouseleave',()=>{if(isDesktop){dropdown.classList.remove('is-open');const toggle=dropdown.querySelector('a[aria-haspopup]');if(toggle){toggle.setAttribute('aria-expanded','false')}}})});navMenu.querySelectorAll('a:not([aria-haspopup])').forEach(link=>{link.addEventListener('click',()=>{if(!isDesktop){closeMobileMenu()}})});document.addEventListener('click',handleClickOutside);window.addEventListener('resize',handleResize,{passive:true});document.addEventListener('keydown',handleEscapeKey)}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',init)}else{init()}})();